# MCP Server Management for ARES
# Include this in your main Makefile or run directly with make -f Makefile.mcp

.PHONY: install-mcp list-mcp clean-mcp

# Install all MCP servers for ARES
install-mcp:
	@echo "ðŸš€ Installing MCP servers for ARES..."
	@echo "Removing existing servers first..."
	@claude mcp remove context7 sqlite git github fetch filesystem sequentialthinking docker memory code-checker ripgrep-search eslint-quality playwright-enhanced 2>/dev/null || true
	@echo "Installing core MCP servers..."
	@claude mcp add context7 -s project -- npx -y @context7/mcp-server || echo "âš ï¸ context7 failed"
	@claude mcp add sqlite -s project -- npx -y @modelcontextprotocol/server-sqlite $(PWD)/data || echo "âš ï¸ sqlite failed"
	@claude mcp add git -s project -- npx -y @cyanheads/git-mcp-server || echo "âš ï¸ git failed"
	@claude mcp add github -s project -- npx -y @modelcontextprotocol/server-github || echo "âš ï¸ github failed"
	@claude mcp add fetch -s project -- npx -y @tokenizin/mcp-npx-fetch || echo "âš ï¸ fetch failed"
	@claude mcp add filesystem -s project -- npx -y @modelcontextprotocol/server-filesystem $(PWD) || echo "âš ï¸ filesystem failed"
	@claude mcp add sequentialthinking -s project -- npx -y @modelcontextprotocol/server-sequential-thinking || echo "âš ï¸ sequentialthinking failed"
	@claude mcp add docker -s project -- npx -y @modelcontextprotocol/server-docker || echo "âš ï¸ docker failed"
	@claude mcp add memory -s project -- npx -y @modelcontextprotocol/server-memory || echo "âš ï¸ memory failed"
	@echo "Installing additional MCP servers..."
	@if [ -d "/home/user01/projects/mcp-code-checker" ]; then \
		claude mcp add code-checker -s project -- uv run python -m mcp_code_checker --project-dir $(PWD) || echo "âš ï¸ code-checker failed"; \
	else \
		echo "âš ï¸ mcp-code-checker directory not found, skipping"; \
	fi
	@claude mcp add ripgrep-search -s project -- npx -y mcp-ripgrep@latest || echo "âš ï¸ ripgrep-search failed"
	@claude mcp add eslint-quality -s project -- npx -y @eslint/mcp@latest || echo "âš ï¸ eslint-quality failed"
	@claude mcp add playwright-enhanced -s project -- npx -y @executeautomation/playwright-mcp-server || echo "âš ï¸ playwright-enhanced failed"
	@echo "âœ… MCP server installation completed for ARES"
	@echo "ðŸ“ Next: Restart Claude Code and approve .mcp.json when prompted"

# List current MCP servers
list-mcp:
	@echo "ðŸ“‹ MCP servers configured for ARES:"
	@claude mcp list || echo "No MCP servers configured"

# Clean all MCP servers
clean-mcp:
	@echo "ðŸ§¹ Removing all MCP servers from ARES..."
	@claude mcp remove context7 sqlite git github fetch filesystem sequentialthinking docker memory code-checker ripgrep-search eslint-quality playwright-enhanced 2>/dev/null || true
	@echo "âœ… All MCP servers removed"
